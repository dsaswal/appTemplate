<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Account Details</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" th:href="@{/}"><i class="fas fa-building"></i> Enterprise App</a>
        </div>
    </nav>

    <div class="container mt-4">
        <h2><i class="fas fa-university"></i> Account Details</h2>

        <div class="card mt-3">
            <div class="card-header">Account Information</div>
            <div class="card-body">
                <div class="row mb-3">
                    <div class="col-md-3"><strong>ID:</strong></div>
                    <div class="col-md-9" th:text="${account.id}"></div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-3"><strong>Account Reference:</strong></div>
                    <div class="col-md-9" th:text="${account.accountRef}"></div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-3"><strong>Account Name:</strong></div>
                    <div class="col-md-9" th:text="${account.accountName}"></div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-3"><strong>Currency:</strong></div>
                    <div class="col-md-9" th:text="${account.currency}"></div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-3"><strong>Status:</strong></div>
                    <div class="col-md-9">
                        <span th:class="'badge ' + ${account.status.name() == 'ACTIVE' ? 'bg-success' :
                                                      account.status.name() == 'INACTIVE' ? 'bg-warning' :
                                                      account.status.name() == 'SUSPENDED' ? 'bg-danger' : 'bg-secondary'}"
                              th:text="${account.status}"></span>
                    </div>
                </div>
            </div>
        </div>

        <div class="card mt-3">
            <div class="card-header">Customer Information</div>
            <div class="card-body">
                <div class="row mb-3">
                    <div class="col-md-3"><strong>Customer Name:</strong></div>
                    <div class="col-md-9">
                        <a th:href="@{/customers/{id}(id=${account.customer.id})}" th:text="${account.customer.name}"></a>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-3"><strong>Customer Email:</strong></div>
                    <div class="col-md-9" th:text="${account.customer.email}"></div>
                </div>
            </div>
        </div>

        <div class="card mt-3">
            <div class="card-header">Audit Information</div>
            <div class="card-body">
                <div class="row mb-3">
                    <div class="col-md-3"><strong>Created By:</strong></div>
                    <div class="col-md-9" th:text="${account.createdBy}"></div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-3"><strong>Created At:</strong></div>
                    <div class="col-md-9" th:text="${#temporals.format(account.createdAt, 'yyyy-MM-dd HH:mm:ss')}"></div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-3"><strong>Last Updated By:</strong></div>
                    <div class="col-md-9" th:text="${account.updatedBy}"></div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-3"><strong>Last Updated At:</strong></div>
                    <div class="col-md-9" th:text="${#temporals.format(account.updatedAt, 'yyyy-MM-dd HH:mm:ss')}"></div>
                </div>
            </div>
        </div>

        <div class="mt-3">
            <a th:href="@{/accounts/customer/{id}(id=${account.customer.id})}" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Back to Customer Accounts
            </a>
            <a th:href="@{/admin/audit/entity(entityType=Account,entityId=${account.id})}" class="btn btn-info">
                <i class="fas fa-history"></i> View Audit Trail
            </a>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
